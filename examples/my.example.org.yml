---

### configuration variables for my.example.org

# REQUIRED administrator/sudo account username/password
ansible_user: "CHANGEME"
ansible_become_pass: "CHANGEME"
# ansible_ssh_port: '22'

# REQUIRED default admin username/password for new services/applications
# The default is to use the username/password below for all new applications
# You can set different values for each application further down this file
xsrv_default_username: "CHANGEME"
xsrv_default_password: "CHANGEME"

##### OUTGOING MAIL #####
# see roles/common/defaults/main.yml

setup_msmtp: no
# msmtp_host: "smtp.example.com"
# msmtp_username: "CHANGEME"
# msmtp_password: "CHANGEME"
# msmtp_admin_email: "CHANGEME"

##### FIREWALL/FAIL2BAN #####
# see roles/common/defaults/main.yml

# Alias for LAN IP addresses
firehol_lan: "10.0.0.0/8,192.168.0.0/16,172.16.0.0/12"

firehol_networks:
  - name: "global"
    src: "any"
    interface: "any"
    policy: "DROP"
    allow_input: # incoming traffic
      - { name: "ssh", src: "any" } # ssh from anywhere
      - { name: "http", src: "any" } # web server access from anywhere
      - { name: "https", src: "any" } # web server access from anywhere
      - { name: "netdata", src: "any" } # monitoring dashboard
      # - { name: "ping", src: "any" } # allow incoming ICMP pings
      # - { name: "mumble", src: "any" } # mumble voip server
      # - { name: "samba", src: "{{ firehol_lan }}" } # samba file sharing
      # - { name: "pulseaudio", src: "{{ firehol_lan }}" } # pulseaudio sound server
      # - { name: "mdns", src: "any" } # avahi/zeroconf/MDNS/DNS-SD/uPnP, requires src=any
      # - { name: "multicast", src: "any" } # avahi/zeroconf/MDNS/DNS-SD/uPnP, requires src=any
      # - { name: "sshcustom", src: "any" } # SSH server on custom port
      # - { name: "transmission", src: "any", } # bittorrent peer connections, outgoing requires 'all'
    allow_output: # outgoing connections
      - { name: "dns", dst: "any" } # DNS queries to anywhere
      - { name: "ntp", dst: "any" } # time/date synchronization
      - { name: "dhcp", dst: "{{ firehol_lan }}" } # DHCP requests on LAN
      - { name: "http", dst: "any" } # outgoing HTTP requests
      - { name: "https", dst: "any" } # outgoing HTTPS requests
      - { name: "ping", dst: "any" } # outgoing ICMP pings
      - { name: "submission", dst: "any" } # outgoing mail/port 587
      # - { name: "ssh", dst: "any" } # ssh/git-over-ssh access to anywhere
      # - { name: "imaps", dst: "any" } # nextcloud mail
      # - { name: "smtps", dst: "any" } # nextcloud mail
      # - { name: "all", dst: "any" } # allow ALL outgoing connections

# fail2ban: don't auto-ban IP addresses from these networks
fail2ban_ignoreip: ['10.0.0.0/8', '192.168.0.0/16', '172.16.0.0/12']

##### RSNAPSHOT BACKUP SERVICE #####
# see roles/backup/default/main.yml

# yes/no: automatically setup backups for https://gitlab.com/nodiscc/xsrv roles enabled on the host
rsnapshot_autobackup_xsrv_roles: yes

##### APACHE WEB SERVER #####
# see roles/lamp/defaults/main.yml

apache_virtualhosts:
  - servername: "{{ inventory_hostname }}"
    documentroot: "/var/www/{{ inventory_hostname }}"
    cert_mode: selfsigned # selfsigned/letsencrypt
    allow_robots: no
    auto_homepage: yes
    reverse_proxies:
      - location: "/gitea"
        backend: "http://localhost:3000"

##### NEXTCLOUD #####
# see roles/nextcloud/defaults/main.yml
nextcloud_user: "{{ xsrv_default_username }}"
nextcloud_password: "{{ xsrv_default_password }}"

##### TT-RSS #####
# see roles/tt-rss/defaults/main.yml
tt_rss_user: "{{ xsrv_default_username }}"
tt_rss_password: "{{ xsrv_default_password }}"

##### GITEA #####
# see roles/gitea/defaults/main.yml
gitea_admin_user: "{{ xsrv_default_username }}"
gitea_admin_password: "{{ xsrv_default_password }}"
gitea_admin_email: "admin@{{ inventory_hostname }}"
